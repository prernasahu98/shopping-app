"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(exports){"use strict";function EventEmitter(){}var proto=EventEmitter.prototype;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i}}return-1}function alias(name){return function aliasClosure(){return this[name].apply(this,arguments)}}proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key]}}}else{response=events[evt]||(events[evt]=[])}return response};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener)}return flatListeners};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners}return response||listeners};function isValidListener(listener){if(typeof listener==="function"||listener instanceof RegExp){return true}else if(listener&&_typeof(listener)==="object"){return isValidListener(listener.listener)}else{return false}}proto.addListener=function addListener(evt,listener){if(!isValidListener(listener)){throw new TypeError("listener must be a function")}var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=_typeof(listener)==="object";var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false})}}return this};proto.on=alias("addListener");proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true})};proto.once=alias("addOnceListener");proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i])}return this};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1)}}}return this};proto.off=alias("removeListener");proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners)};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners)};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(_typeof(evt)==="object"&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==="function"){single.call(this,i,value)}else{multiple.call(this,i,value)}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i])}}return this};proto.removeEvent=function removeEvent(evt){var type=_typeof(evt);var events=this._getEvents();var key;if(type==="string"){delete events[evt]}else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key]}}}else{delete this._events}return this};proto.removeAllListeners=alias("removeEvent");proto.emitEvent=function emitEvent(evt,args){var listenersMap=this.getListenersAsObject(evt);var listeners;var listener;var i;var key;var response;for(key in listenersMap){if(listenersMap.hasOwnProperty(key)){listeners=listenersMap[key].slice(0);for(i=0;i<listeners.length;i++){listener=listeners[i];if(listener.once===true){this.removeListener(evt,listener.listener)}response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener)}}}}return this};proto.trigger=alias("emitEvent");proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};proto._getEvents=function _getEvents(){return this._events||(this._events={})};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter};if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&module.exports){module.exports=EventEmitter}else{exports.EventEmitter=EventEmitter}})(window||{});(function(w){if(typeof w.verloopCount==="undefined"){w.verloopCount=0}var extractOriginFromUrl=function extractOriginFromUrl(url){var pathArray=url.split("/");var protocol=pathArray[0];var host=pathArray[2];return protocol+"//"+host};try{if(w.verloopCount>0){throw new Error("Verloop script should only be added once.")}w.verloopCount++;w.Verloop=w.Verloop||{_:[]};var config={};var widget;var iframe;var hookQueue=[];var queue=[];var onDrawCompleteQueue=[];var _ready=false;var _roomReady=false;var messageCounter=0;var originalDocumentTitle=document.title;var iframeUrl=w.Verloop.url;var containerAdded=false;var clientInfo;var widgetSetupInfo={widgetColor:"#000"};var didSetup=false;var triggersHandled=false;var validCallbacks=["chat-maximized","chat-minimized","chat-started","chat-ended","button-clicked","agent-message-received","logout-complete","widget-loaded"];var isValidUrl=function isValidUrl(url){var matchPattern=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;return matchPattern.test(url)};var callbacks=new EventEmitter;var registerCallback=function registerCallback(eventName,fn){if(validCallbacks.indexOf(eventName)===-1){return false}return callbacks.on(eventName,fn)};var emitCallback=function emitCallback(eventName,data){if(typeof data!=="undefined"){callbacks.emit(eventName,data)}else{callbacks.emit(eventName)}};var drawComplete=function drawComplete(){onDrawCompleteQueue.forEach(function(name){api[name].apply(this)});onDrawCompleteQueue=[]};var callHook=function callHook(action,params){if(!_roomReady&&action=="close"||!_ready){return hookQueue.push(arguments)}var data={src:"verloop",fn:action,args:params};iframe.contentWindow.postMessage(data,"*")};var handleOnline=function handleOnline(){var offlineDisplay=document.querySelector(".offline-box");if(!_ready){if(offlineDisplay){offlineDisplay.style.visibility="hidden";if(widget.dataset.state=="opened"){iframe.src=iframeUrl}}}else{if(offlineDisplay){offlineDisplay.style.visibility="hidden";if(widget.dataset.state==="closed"){callHook("widgetOpened");iframe.focus()}}}};var handleOffline=function handleOffline(){var offlineDisplay=document.querySelector(".offline-box");if(!_ready){if(offlineDisplay){offlineDisplay.style.visibility="visible"}}};var _closeWidget=function closeWidget(){_updateMessageCounter(0);var widget=document.querySelector(".verloop-widget");if(!widget){onDrawCompleteQueue.push("closeWidget");return}var container=document.querySelector(".verloop-container");if(container){if(!_ready&&window.navigator.onLine){queue.push("closeWidget")}var visible=container.classList.contains("visible");if(!visible){if(widget.dataset.state!=="closed"){widget.dataset.state="closed"}return}}widget.classList.add("closing");setTimeout(function(){widget.classList.remove("closing");widget.classList.remove("opened");if(container){container.classList.remove("visible")}widget.dataset.state="closed";callHook("widgetClosed");emitCallback("chat-minimized")},200)};var _addContainer=function addContainer(){var widget=document.querySelector(".verloop-widget");if(!widget){onDrawCompleteQueue.push("addContainer");return}containerAdded=true;var verloopContainer=document.createElement("div");verloopContainer.className="verloop-container";verloopContainer.innerHTML='\n\t\t\t\t<div class="load-frame">\n\t\t\t\t\t<div class="verloop-loading verloop-loading-full-height"></div>\n\t\t\t\t</div>\n\t\t\t\t<iframe id="verloop-iframe" allowtransparency="true" src="'.concat(iframeUrl,'" allowTransparency="true" allowfullscreen></iframe>\n\t\t\t');widget.appendChild(verloopContainer);iframe=document.getElementById("verloop-iframe");var offlineDisplay=document.createElement("div");offlineDisplay.className="offline-box";offlineDisplay.innerHTML='\n\t\t\t\t<div class="offline-card">\n\t\t\t\t\t<div class="offline-card-header">\n\t\t\t\t\t\t<div class="internet-icon">\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="35.463px" height="35.463px" viewBox="0 0 35.463 35.463" style="enable-background:new 0 0 35.463 35.463;" xml:space="preserve">\n\t\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t\t<path xmlns="http://www.w3.org/2000/svg" d="M29.159,17.915l-1.293-1.294c4.226-4.227,4.225-11.102-0.002-15.328L29.159,0C34.099,4.938,34.099,12.977,29.159,17.915z    M25.628,14.384l1.293,1.296c3.706-3.707,3.706-9.738,0-13.443L25.628,3.53C28.62,6.521,28.62,11.393,25.628,14.384z M24.614,13.37   c2.434-2.433,2.434-6.394-0.001-8.826L23.32,5.837c1.722,1.722,1.722,4.521,0,6.239L24.614,13.37z M7.599,1.293L6.304,0   c-4.939,4.938-4.939,12.977,0,17.915l1.293-1.294C3.371,12.396,3.372,5.52,7.599,1.293z M8.54,15.68l1.294-1.296   c-2.992-2.991-2.992-7.86,0-10.854L8.54,2.236C4.833,5.941,4.833,11.973,8.54,15.68z M10.848,13.37l1.294-1.294   c-1.72-1.721-1.72-4.52,0.001-6.239l-1.294-1.293C8.415,6.979,8.415,10.938,10.848,13.37z M25.17,31.658h-4.449l-2.668-19.279   c1.243-0.16,2.207-1.21,2.207-2.497c0-1.396-1.133-2.528-2.529-2.528c-1.397,0-2.529,1.133-2.529,2.528   c0,1.287,0.964,2.337,2.206,2.497l-2.667,19.279h-4.449c-1.051,0-1.902,0.853-1.902,1.902c0,1.051,0.852,1.902,1.902,1.902h14.879   c1.051,0,1.902-0.854,1.902-1.902C27.073,32.511,26.222,31.658,25.17,31.658z"/>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span>Your internet is down</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="offline-card-body">\n\t\t\t\t\t\t\tTry launching chat after some time\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t';var offlineDisplayClose=document.createElement("div");offlineDisplayClose.className="offline-close";offlineDisplayClose.innerHTML='\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" height="18" viewBox="0 0 24 24" width="18">\n\t\t\t\t\t<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n\t\t\t\t\t<path d="M0 0h24v24H0z" fill="none" />\n\t\t\t\t</svg>\n\t\t\t';offlineDisplay.appendChild(offlineDisplayClose);verloopContainer.appendChild(offlineDisplay);document.querySelector(".offline-close").addEventListener("click",_closeWidget);if(window.navigator.onLine){offlineDisplay.style.visibility="hidden"}else{offlineDisplay.style.visibility="visible"}};var _openWidget=function openWidget(){var widget=document.querySelector(".verloop-widget");if(!widget){onDrawCompleteQueue.push("openWidget");return}if(!_ready&&window.navigator.onLine){if(iframe&&!iframe.contentDocument){iframe.src=iframeUrl}}if(!containerAdded){_addContainer()}var container=document.querySelector(".verloop-container");var visible=container.classList.contains("visible");if(visible){if(widget.dataset.state!=="opened"){widget.dataset.state="opened"}return}widget.classList.remove("trigger-on");container.classList.add("visible");widget.classList.add("opening");setTimeout(function(){widget.dataset.state="opened";widget.classList.remove("opening");widget.classList.add("opened");callHook("widgetOpened");iframe.focus();emitCallback("chat-maximized")},200);_updateMessageCounter(0);var triggerEls=document.getElementsByClassName("verloop-trigger-msg");for(var i=triggerEls.length-1;i>=0;--i){triggerEls[i].remove()}if(clientInfo&&clientInfo.triggers){for(var i=0;i<clientInfo.triggers.length;i++){if(clientInfo.triggers[i].timeout){clearTimeout(clientInfo.triggers[i].timeout)}}}};var _openUrl=function openUrl(url){var check=isValidUrl(url);if(check){var newWindow=window.open(url);newWindow.focus()}else{console.error("Invalid Url")}};var showTriggerMessage=function showTriggerMessage(user,msg){var triggerMessage=document.createElement("div");triggerMessage.className="verloop-trigger-msg";triggerMessage.innerHTML='\n\t\t\t<div class="verloop-trigger-user">\n\t\t\t\t<strong class="verloop-trigger-name">'.concat(user,'</strong>\n\t\t\t\t<span>says</span>\n\t\t\t</div>\n\t\t\t<div class="verloop-trigger-body">').concat(msg,"</div>");var button=document.querySelector(".verloop-button");if(button){button.appendChild(triggerMessage);setTimeout(function(){widget.classList.add("trigger-on");triggerMessage.style.display="block";triggerMessage.classList.add("open")},100)}};var processTriggers=function processTriggers(){triggersHandled=true;if(clientInfo.triggers){clientInfo.triggers.forEach(function(trigger){if(trigger.skip||trigger.enabled&&trigger.enabled===false){return}var triggerMatched=true;var pageTime=0;trigger.conditions.forEach(function(condition){if(condition.name==="page-url"&&!window.location.href.match(new RegExp(condition.value))){triggerMatched=false;return}if(condition.name==="time-on-site"){pageTime=parseInt(condition.value)}});if(triggerMatched){if(trigger.timeout){clearTimeout(trigger.timeout)}if(trigger.message&&trigger.agent){trigger.timeout=setTimeout(function(){var verloopSound=document.querySelector("#chatTriggerAudio");try{if(verloopSound){verloopSound.play()}}catch(e){}showTriggerMessage(trigger.agent.name,trigger.message.msg)},pageTime*1e3)}}})}};var api={ready:function ready(args){_ready=true;var waitForRoom=false;var queuedForRoom=[];var loadFrame=document.querySelector(".load-frame");loadFrame.style.visibility="hidden";if(hookQueue.length>0){hookQueue.forEach(function(hookParams){if(hookParams[0]=="close"){waitForRoom=true;queuedForRoom.push(hookParams)}else if(waitForRoom){queuedForRoom.push(hookParams)}else{callHook.apply(this,hookParams)}});hookQueue=queuedForRoom}if(queue.length>0){queue.forEach(function(name){api[name].apply(this)});queue=[]}var btn=document.querySelector(".verloop-button");btn.classList.add("no-transition");if(!didSetup){btn.style.backgroundColor=args.color}btn.classList.remove("no-transition");setTimeout(function(){widget.classList.remove("starting");widget.classList.add("started")},100)},roomReady:function roomReady(){_roomReady=true;if(hookQueue.length>0){hookQueue.forEach(function(hookParams){callHook.apply(this,hookParams)})}},fireTrigger:function fireTrigger(args){var trigger=args.trigger;if(!triggersHandled&&trigger.message&&trigger.agent){showTriggerMessage(trigger.agent.name,trigger.message.msg)}},toggleWindow:function toggleWindow(){if(widget.dataset.state==="closed"){_openWidget()}else{_closeWidget()}},openUrl:function openUrl(args){if(args.url){_openUrl(args.url)}},addContainer:function addContainer(){_addContainer()},openWidget:function openWidget(){_openWidget()},closeWidget:function closeWidget(context){_closeWidget()},removeWidget:function removeWidget(){document.getElementsByTagName("body")[0].removeChild(widget)},callback:function callback(eventName,data){emitCallback(eventName,data)},closeComplete:function closeComplete(context,error){if(context==="logout"){if(!error||error&&(error.error===404||error.message&&error.message==="Room not set")){var newUserId="logout-"+Math.random();setUserId(newUserId,context)}else{emitCallback("logout-complete",true)}}},setUserIdComplete:function setUserIdComplete(context,error){if(context==="logout"){if(!error){setUserParams({email:"",name:"",phone:""},context)}else{emitCallback("logout-complete",true)}}},setUserParamComplete:function setUserParamComplete(context,error){if(context==="logout"){if(!error){callHook("widgetOpened");emitCallback("logout-complete",null)}else{emitCallback("logout-complete",true)}}}};var pageVisited=function pageVisited(change){callHook("pageVisited",{change:change,location:JSON.parse(JSON.stringify(document.location)),title:document.title})};var currentSrc=function currentSrc(){if(iframe){console.log("Resetting iframe by modifying the source");return iframe.src}};var setUserParams=function setUserParams(params,context){if(params.userId){var url=extractOriginFromUrl(currentSrc()||w.Verloop.url);var newUrl="".concat(url,"/livechat?user_id=").concat(params.userId);if(params.name){newUrl+="&name=".concat(params.name)}if(params.email){newUrl+="&email=".concat(params.email)}if(params.phone){newUrl+="&phone=".concat(params.phone)}w.Verloop.url=newUrl;iframeUrl=newUrl;if(_ready){init(newUrl)}}else{callHook("setUserParams",[params,context])}};var setUserId=function setUserId(userId,context){callHook("setUserId",[userId,context])};var setCustomField=function setCustomField(key,value,options){callHook("setCustomField",[key,value,options])};var setDepartment=function setDepartment(department){callHook("setDepartment",department)};var setRecipe=function setRecipe(recipe){callHook("setRecipe",recipe)};var clearDepartment=function clearDepartment(){callHook("clearDepartment")};var close=function close(context){callHook("close",context)};var logout=function logout(){if(!containerAdded){_addContainer();callHook("widgetOpened")}close("logout")};var isColor=function isColor(strColor){var s=(new Option).style;s.color=strColor;return s.color!==""};var setWidgetColor=function setWidgetColor(color){if(isColor(color)){didSetup=true;widgetSetupInfo.widgetColor=color}};var currentPage={href:null,title:null};var trackNavigation=function trackNavigation(){return setInterval(function(){if(document.location.href!==currentPage.href){pageVisited("url");currentPage.href=document.location.href}if(document.title!==currentPage.title){pageVisited("title");currentPage.title=document.title}},800)};var destroy=function destroy(){var widget=document.querySelector(".verloop-widget");if(widget){document.body.removeChild(widget)}if(config&&config._timer){clearInterval(config._timer);delete config._timer}iframe=null;widget=null;_ready=false;_updateMessageCounter(0)};var _changeUrl=function _changeUrl(url){hookQueue=[];_ready=false;containerAdded=false;iframeUrl=url;init(url)};var stop=function stop(){return destroy()};var _updateMessageCounter=function _updateMessageCounter(value){messageCounter=value;if(!_ready){return}var elements=document.getElementsByClassName("verloop-livechat-unread-count");if(elements&&elements[0]){if(messageCounter>0&&widget&&widget.dataset&&widget.dataset.state==="closed"){var count="".concat(messageCounter);if(messageCounter>9){count="9+"}elements[0].style.display="block";elements[0].innerHTML=count;document.title="(".concat(count,") ").concat(originalDocumentTitle)}else{elements[0].style.display="none";document.title=originalDocumentTitle}}};var init=function init(url){if(!didSetup){var fetchUrl=new URL(url);var newPath=fetchUrl.protocol+"//"+fetchUrl.hostname+"/livechatInit";var initUrl=new URL(newPath);if(initUrl){fetch(initUrl).then(function(response){return response.json()}).then(function(data){clientInfo=data;widgetSetupInfo.widgetColor=clientInfo.bgColor;draw(url);processTriggers()}).catch(function(error){console.log("Error: Unable to initialize Livechat with client data");draw(url)})}else{draw(url)}}else{draw(url)}};var draw=function draw(url){if(currentSrc()===url){return}destroy();var viewportMeta=document.querySelector('meta[name="viewport"]');if(!viewportMeta){viewportMeta=document.createElement("meta");viewportMeta.setAttribute("name","viewport");document.getElementsByTagName("head")[0].appendChild(viewportMeta)}viewportMeta.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no");if(!document.getElementById("verloopCss")){var css=document.createElement("style");css.id="verloopCss";css.type="text/css";css.innerHTML="\n\t\t\t\t\t.no-transition {\n\t\t\t\t\t\ttransition: none;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-button {\n\t\t\t\t\t\tposition: fixed;\n\t\t\t\t\t\tbottom: 20px;\n\t\t\t\t\t\tright: 20px;\n\t\t\t\t\t\tz-index: 2147483647;\n\t\t\t\t\t\tfont-family: 'Source Sans Pro', sans-serif;\n\t\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\twidth: 60px;\n\t\t\t\t\t\theight: 60px;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tbox-shadow: -1px 2px 10px rgba(0, 0, 0, 0.28);\n\t\t\t\t\t\tbackground-color: #1b7cfb;\n\t\t\t\t\t\ttransition: all 200ms ease-in-out;\n\t\t\t\t\t\ttransform: none;\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-button strong {\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-trigger-msg {\n\t\t\t\t\t\tdirection: ltr !important;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: 0px;\n\t\t\t\t\t\tright: 68px;\n\t\t\t\t\t\twidth: 280px;\n\t\t\t\t\t\tfont-size: 0.95em;\n\t\t\t\t\t\tfont-weight: 300;\n\t\t\t\t\t\tborder-radius: 5px 5px 0 5px;\n\t\t\t\t\t\tbox-shadow: 3px 3px 20px rgba(0, 0, 0, 0.2);\n\t\t\t\t\t\tcolor: #505050;\n\t\t\t\t\t\tpadding: 12px 18px;\n\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\tanimation-duration: 200ms;\n\t\t\t\t\t\tanimation-fill-mode: both;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\tz-index: 2147483647;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-trigger-msg:after {\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\tright: -6px;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\tborder-width: 0 9px 6px 0;\n\t\t\t\t\t\tborder-color: transparent transparent #fff\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-trigger-msg.open {\n\t\t\t\t\t\tanimation-name: window-fade-in-up;\n\t\t\t\t\t\tanimation-timing-function: ease-in;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-trigger-user {\n\t\t\t\t\t\tmargin-bottom: 8px;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-trigger-name {\n\t\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-widget.opened .verloop-button, .verloop-widget.opening .verloop-button, .verloop-widget.closing .verloop-button {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: scale3d(0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-livechat-logo {\n\t\t\t\t\t\theight: 60px;\n\t\t\t\t\t\twidth: 60px;\n\t\t\t\t\t\tbackground-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAA/NJREFUWAm9l9uLjWscx2ctQyF7a1PkQpTa7Z19obYk0oQbuRLKFcrFVi5cqP1PYB9y4UJy4QJlKCnuXZAGETU0RWqiHCOHzRx8Ps/7/tY8611rzB6t8avv+/zOh+d5D2vVusah0dHROqZ6rVYbChd0P8P/Dn4Di8GPYBp4B56CftAHbhP3nrWLmBqLeYaV/xcRZNJE8N1gC+gFz8FE9AmHa+AAWJTnCf6rK0Hd4QC/FlwGVRpCIT6XCHm44jiA/EeWr5E7dE0rzg0HeCd4D4KczEIjE8Amwhc20WmuCyzG2qjxteL/FnHp+pFrdbLMPC5ro/9l1uvwS9s2gSE/87+yoDxBpp4U6665I1IfWNjUBIqaKJX74IMiKORJryMjbkKiOBaF8yDq1RtngnIFeAWkNHmWoNB+wzXLYRPR0f5yYB/1gjCeKfN3rHj0mzXhUyMNgiVWTh0g9MBvVQGl+4EXRyF14JrlMrcvJN8Pe0wdW7ADXuNnVxpiaSEDR1q0KCr++rjdLa7o8qm2I/9U5+LzuaH0Tg5Zx6rNZHEbtOGW5Jm/fvpMQ9fScOaHS5ev9TU6LwfLgJR2JOve4jZl8SCTq6+O6OThpy01TK6qn/lCt9qCvwLJBPkONGT0Z8F6sB3cBJEkEsXk97HtBD3gOOii2eSb9aFsbukXz++gXULxmpX3cVGW/LDMKvzTea9EfqEB0if8PsBvCj9X5ItA8u6PRzDPfcsd8JPajtJuYLjFEH4TZpdON1gflbyL00uD4LoMvnNcoavFUuysPDbzRu75NjBdAxTbWUhj8iqC5tKE33xpDYh7RjnOfTH8OhX4viXGvD3KEGLTE1Boufplim4aylJnc9IKcIoER1nngT/BD8Bz1Md4d8GC/+DnM/4Q7AIbgeSNmxjWfNCXfgdOYNkN4kZS5xQG6NzSIPakj6Q6QtFQIY1dqzmU9XXnLsQEY+5wWWKLGxDnnHjsUlMMgrn000cKvuqoPXa3P5gUwWBVZ/XqfDtG4jjzFFO5hC0mbJfPPKG/1tQAU0WRSt60KwZFYIs9U+jTlDdsYzMkzQDXK20dI6DTa2XAc8jPv2sDDOR94TE9A8dA+63SMAWUPyWHmH7Ae25KdyA7c+8t/+BY7xL4G0j1KW2AKS3i5P7OmAHugb3o/TZ0sw43NeCW4NARKqe3sGTxu2AbRR+XxdNfvryBUYzjPoZmqZJFAtiMFU48RC4L+Hq2xkWwGV1/Xhxd+hYYILlOagdImAK5ROMWC2gbBIfBERuqFtfBj9FMGcht6hTdIVEvOEnhhyZtV1y9Dfgr5gF4DfIjQZyQ3ALP+Q14AuLveR+FzRff/6a/+eqDvgAdeHSpWDn94wAAAABJRU5ErkJggg==');\n\t\t\t\t\t\tbackground-size: 28px 28px;\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\t\tbackground-position: center center;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.verloop-livechat-unread-count {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: -4px;\n\t\t\t\t\t\tleft: -2px;\n\t\t\t\t\t\twidth: 23px;\n\t\t\t\t\t\theight: 23px;\n\t\t\t\t\t\tline-height: 19px;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tborder-width: 2px;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\tborder-color: #fff;\n\t\t\t\t\t\tbackground: #0C9735;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-container {\n\t\t\t\t\t\theight: 0px;\n\t\t\t\t\t\twidth: 0px;\n\t\t\t\t\t\tposition: fixed;\n\t\t\t\t\t\tright: 20px;\n\t\t\t\t\t\tbottom: 20px;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-container.visible {\n\t\t\t\t\t\tbackground: #ffffff;\n\t\t\t\t\t\theight: calc(100% - 150px);\n\t\t\t\t\t\twidth: 370px;\n\t\t\t\t\t\tmin-height: 200px;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tz-index: 2147483647;\n\t\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tbox-shadow: 0 0 20px rgba(0, 0, 0, 0.28);\n\t\t\t\t\t\tanimation-duration: 200ms;\n\t\t\t\t\t\tanimation-fill-mode: both;\n\t\t\t\t\t}\n\t\t\t\t\t.load-frame {\n\t\t\t\t\t\tz-index: 10;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-loading { \n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-loading-full-height {\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-loading::after {\n\t\t\t\t\t\t content: \"\";\n\t\t\t\t\t\t width: 30px;\n\t\t\t\t\t\t height: 30px;\n\t\t\t\t\t\t border: 5px solid #dddddd;\n\t\t\t\t\t\t border-top-color: "+widgetSetupInfo.widgetColor+";\n\t\t\t\t\t\t border-radius: 50%;\n\t\t\t\t\t\t animation: verloop-spinner 1s ease infinite;\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes verloop-spinner {\n\t\t\t\t\t\tto {\n\t\t\t\t\t\t\ttransform: rotate(1turn);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-widget.opening .verloop-container {\n\t\t\t\t\t\tanimation-name: window-fade-in-up;\n\t\t\t\t\t\tanimation-timing-function: ease-in;\n\t\t\t\t\t}\n\t\t\t\t\t.verloop-widget.closing .verloop-container {\n\t\t\t\t\t\tanimation-name: window-fade-out-down;\n\t\t\t\t\t\tanimation-timing-function: ease-out;\n\t\t\t\t\t}\n\t\t\t\t\t#verloop-iframe {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tbackground: #fff;\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes window-fade-in-up {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: translate3d(0, 10px, 0);\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: none;\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes window-fade-out-down {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: none;\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: translate3d(0, 10px, 0);\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t@media only screen and (max-width: 480px) {\n\t\t\t\t\t\t.verloop-container.visible {\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.offline-box {\n\t\t\t\t\t\tz-index: 100;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tfont-family: Source Sans Pro,sans-serif;\t\t\n\t\t\t\t\t}\n\t\t\t\t\t.offline-card {\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.offline-card-header {\n\t\t\t\t\t\tmargin: 20px 0;\n\t\t\t\t\t\tfont-size: 1.2em;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.internet-icon {\n\t\t\t\t\t\tpadding: 10px;\n\t\t\t\t\t}\n\t\t\t\t\t.offline-card-body {\n\t\t\t\t\t\tmargin: 30px 0;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.offline-close {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tline-height: initial;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tright: 5px;\n\t\t\t\t\t\ttop: 5px;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\theight: 42px;\n\t\t\t\t\t\twidth: 42px;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tz-index: 1000;\n\t\t\t\t\t}\n\n\t\t\t\t\t.offline-close > svg {\n\t\t\t\t\t\tfill: #000;\n\t\t\t\t\t\tfill-opacity: 0.65;\n\t\t\t\t\t}\n\n\t\t\t\t\t.offline-close:hover > svg {\n\t\t\t\t\t\tfill-opacity: 1;\n\t\t\t\t\t}\n\n\n\t\t\t\t";var font=document.createElement("link");font.setAttribute("href","https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600");font.setAttribute("rel","stylesheet");document.getElementsByTagName("head")[0].appendChild(css);document.getElementsByTagName("head")[0].appendChild(font);w.addEventListener("message",function(msg){if(_typeof(msg.data)==="object"&&msg.data.src!==undefined&&msg.data.src==="verloop"){if(api[msg.data.fn]!==undefined&&typeof api[msg.data.fn]==="function"){var args=[].concat(msg.data.args||[]);api[msg.data.fn].apply(null,args)}}},false);registerCallback("agent-message-received",function(message){_updateMessageCounter(messageCounter+1)})}var chatWidget=document.createElement("div");chatWidget.dataset.state="start";chatWidget.className="verloop-widget starting";var verlooopButton=document.createElement("div");verlooopButton.className="verloop-button";verlooopButton.innerHTML='\n\t\t\t\t<div class="verloop-livechat-logo"></div>\n\t\t\t\t<div class="verloop-livechat-unread-count">1</div>\n\t\t\t';chatWidget.appendChild(verlooopButton);verlooopButton.style.backgroundColor=widgetSetupInfo.widgetColor;var verloopSound=document.createElement("div");verloopSound.innerHTML='\n\t\t\t\t<audio id="chatTriggerAudio" preload>\n\t\t\t\t\t<source src="https://cdn-ops.verloop.io/assets/sounds/chime.mp3" type="audio/mpeg">\n\t\t\t\t</audio>\n\t\t\t';chatWidget.appendChild(verloopSound);document.getElementsByTagName("body")[0].appendChild(chatWidget);document.querySelector(".verloop-button").addEventListener("click",_openWidget);widget=document.querySelector(".verloop-widget");config._timer=trackNavigation();drawComplete();emitCallback("widget-loaded")};var livechat={stop:stop,changeUrl:_changeUrl,setUserId:setUserId,setUserParams:setUserParams,setCustomField:setCustomField,setDepartment:setDepartment,clearDepartment:clearDepartment,setRecipe:setRecipe,openWidget:_openWidget,closeWidget:_closeWidget,close:close,logout:logout,setWidgetColor:setWidgetColor,onButtonClicked:function onButtonClicked(fn){registerCallback("button-clicked",fn)},onChatMaximized:function onChatMaximized(fn){registerCallback("chat-maximized",fn)},onChatMinimized:function onChatMinimized(fn){registerCallback("chat-minimized",fn)},onChatStarted:function onChatStarted(fn){registerCallback("chat-started",fn)},onChatEnded:function onChatEnded(fn){registerCallback("chat-ended",fn)},onLogoutComplete:function onLogoutComplete(fn){registerCallback("logout-complete",fn)},onWidgetLoaded:function onWidgetLoaded(fn){registerCallback("widget-loaded",fn)},onIncomingMessage:function onIncomingMessage(fn){registerCallback("agent-message-received",function(message){if(message&&message.message&&"msg"in message.message)fn(message.message.msg)})}};w.Verloop._.forEach(function(c){c.call(livechat)});var onReady=function onReady(){if(typeof w.Verloop.url!=="undefined"){init(w.Verloop.url)}w.Verloop=function(c){c.call(livechat)};w.Verloop.livechat=livechat};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",onReady)}else{onReady()}window.addEventListener("offline",function(event){handleOffline()});window.addEventListener("online",function(event){handleOnline()})}catch(e){console.error(e)}})(window);